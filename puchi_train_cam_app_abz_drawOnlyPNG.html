<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>プチ電車ペンプロッタ｜完成図PNG（軌跡のみ）</title>
<style>
body{margin:0;font-family:system-ui;background:#fff;color:#111}
header{padding:10px;border-bottom:1px solid #ccc}
main{padding:10px}
button{padding:8px 12px;border-radius:8px;border:none;background:#111;color:#fff}
canvas{border:1px solid #ccc;border-radius:8px;background:#fff}
</style>
</head>
<body>

<header>
<h2>完成図（ペン軌跡のみ）PNG保存</h2>
<button id="btnPNG">PNG保存</button>
</header>

<main>
<canvas id="cv" width="900" height="900"></canvas>
</main>

<script>
const cv=document.getElementById("cv");
const ctx=cv.getContext("2d");

/* ★ここが「正の座標系」：カム生成アプリと同一 */
const path=[
  [135,40],[140,45],[145,40],[140,35],[135,40]
];

/* 描画 */
ctx.lineWidth=2;
ctx.strokeStyle="#000";
ctx.beginPath();
path.forEach((p,i)=>{
  const x=450+p[0]*2;
  const y=450-p[1]*2;
  if(i===0) ctx.moveTo(x,y);
  else ctx.lineTo(x,y);
});
ctx.stroke();

/* PNG保存（iPad対応） */
document.getElementById("btnPNG").onclick=()=>{
  const url=cv.toDataURL("image/png");
  const w=window.open("");
  w.document.write(`<img src="${url}" style="max-width:100%">`);
};
</script>

</body>
</html>